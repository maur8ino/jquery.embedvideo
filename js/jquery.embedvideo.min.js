/*!
 *  Project: jQuery Embed Video
 *  Version: 1.1.0 (2013-03-24)
 *  Description: A jQuery plugin to embed video from Youtube and Facebook (and more to come in future) in a html container.
 *  Author: Mauro Verrocchio <mauroverrocchio@gmail.com>
 *  License: MIT
*/
(function(i){function s(s,o){this.$element=i(s),this.options=i.extend({},e,o),this._defaults=e,this._name=t,this.init()}var t="embedvideo",e={aspectRatio:1.77777778,width:480,height:!1,isFluid:!1,iframeUrl:!1,iframeClass:"youtube-player",videoPoster:!1,videoMp4Url:!1,videoOggUrl:!1,videoWebMUrl:!1,videoFlashUrl:!1,alternativeFlashPlayer:"flowplayer"};s.prototype={init:function(){var i=[];if(this.options.height=this.options.height||1/this.options.aspectRatio*parseInt(this.options.width,10),this.options.dimensions=this.options.isFluid?{width:"100%"}:{width:this.options.width,height:this.options.height},this.options.iframeUrl)i.push('<iframe class="'+this.options.iframeClass+'" type="text/html"'),i.push(' src="'+this.options.iframeUrl+'" frameborder="0"/>'),this.$element.append(i.join("")),this.$embeddedVideo=this.$element.find("iframe");else{if(i.push('<video controls="controls" width="'+this.options.dimensions.width),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),this.options.videoPoster&&i.push('" poster="'+this.options.videoPoster+'"'),i.push(">"),this.options.videoMp4Url&&i.push('<source src="'+this.options.videoMp4Url+'" type="video/mp4"/>'),this.options.videoOggUrl&&i.push('<source src="'+this.options.videoOggUrl+'" type="video/ogg"/>'),this.options.videoWebMUrl&&i.push('<source src="'+this.options.videoWebMUrl+'" type="video/webm"/>'),this.options.videoFlashUrl)i.push('<object width="'+this.options.dimensions.width),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),i.push(">"),i.push('<param name="movie" value="'+this.options.videoFlashUrl+'"/>'),i.push('<param name="allowFullScreen" value="true"/>'),i.push('<param name="wmode" value="transparent" />'),i.push('<embed src="'+this.options.videoFlashUrl+'" type="application/x-shockwave-flash" allowscriptaccess="always" '),i.push('allowfullscreen="true" width="'+this.options.dimensions.width+'"'),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),i.push("></embed>"),this.options.videoPoster&&(i.push('<img src="'+this.options.videoPoster+'" width="'+this.options.dimensions.width),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),i.push(">")),i.push("</object>");else if(this.options.alternativeFlashPlayer){var s=this.options.videoMp4Url?this.options.videoMp4Url:this.options.videoOggUrl?this.options.videoOggUrl:this.options.videoWebMUrl;switch(this.options.alternativeFlashPlayer){case"flowplayer":i.push('<object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="'+this.options.dimensions.width+'"'),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),i.push(">"),i.push('<param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf"/>'),i.push('<param name="allowFullScreen" value="true"/>'),i.push('<param name="wmode" value="transparent" />'),i.push('<param name="flashVars" value="config={\'playlist\':['),this.options.videoPoster&&i.push("'"+encodeURIComponent(this.options.videoPoster)+"',"),i.push("{'url':'"+encodeURIComponent(s)+"','autoPlay':false}]}\" />");break;case"flashfox":i.push('<object type="application/x-shockwave-flash" data="http://flashfox.googlecode.com/svn/trunk/flashfox.swf" width="'+this.options.dimensions.width+'"'),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),i.push(">"),i.push('<param name="movie" value="http://flashfox.googlecode.com/svn/trunk/flashfox.swf"/>'),i.push('<param name="allowFullScreen" value="true"/>'),i.push('<param name="wmode" value="transparent" />'),i.push('<param name="flashVars" value="controls=true&amp;'),this.options.videoPoster&&i.push("poster="+encodeURIComponent(this.options.videoPoster)+"&amp;"),i.push("src="+encodeURIComponent(s)+'" />');break;case"jwplayer":i.push('<object type="application/x-shockwave-flash" data="http://player.longtailvideo.com/player.swf" width="'+this.options.dimensions.width+'"'),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),i.push(">"),i.push('<param name="movie" value="http://player.longtailvideo.com/player.swf"/>'),i.push('<param name="allowFullScreen" value="true"/>'),i.push('<param name="wmode" value="transparent" />'),i.push('<param name="flashVars" value="controlbar=over&amp;'),this.options.videoPoster&&i.push("image="+encodeURIComponent(this.options.videoPoster)+"&amp;"),i.push("file="+encodeURIComponent(s)+'" />')}this.options.videoPoster&&(i.push('<img src="'+this.options.videoPoster+'" width="'+this.options.dimensions.width),this.options.dimensions.height&&i.push('" height="'+this.options.dimensions.height+'"'),i.push(' title="No video playback capabilities, please download the video below"/>'))}i.push("</video>"),this.$element.append(i.join("")),this.$embeddedVideo=this.$element.find("video")}},fluidScale:function(){this.options.isFluid&&(this.options.width=this.$element.width(),this.options.height=1/this.options.aspectRatio*this.options.width,this.$embeddedVideo.attr({width:this.options.width,height:this.options.height}),this.$embeddedVideo.find("object").attr({width:this.options.width,height:this.options.height}),this.$embeddedVideo.find("object embed").attr({width:this.options.width,height:this.options.height}))}},i.fn[t]=function(e){return this.each(function(){i.data(this,"plugin_"+t)||i.data(this,"plugin_"+t,new s(this,e))})}})(jQuery,window,document);